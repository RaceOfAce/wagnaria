<!DOCTYPE html>
<html lang="en" data-ng-app="Wagnaria">
<head>
  <title>Wagnaria!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/pure-min.css" rel="stylesheet" media="screen">
  <link href="css/glyphs.min.css" rel="stylesheet" media="screen">
  <link href="css/main.css" rel="stylesheet" media="screen">
  <meta charset="utf-8" />
</head>
<body>

<div id="basket" class="pure-g-r">
  <span class="pure-menu-toggle" id="toggle">»</span>
  <div id="parasol" class="pure-u">
    <div class="pure-menu pure-menu-open">
      <a class="pure-menu-heading" href="/">Wagnaria</a>
      <ul>
        <li id="nav_airing"><a href="#/">Airing</a></li>
        <li id="nav_future"><a href="#shows/unaired">Future</a></li>
        <li id="nav_incomplete"><a href="#shows/incomplete">Incomplete</a></li>
        <li id="nav_complete"><a href="#shows/completed">Completed</a></li>
        <li id="nav_staff" class="menu-item-divided"><a href="#staff">Staff</a></li>
      </ul>
    </div>
  </div>
  <div id="食べ物" class="pure-u" data-ui-view></div>
</div>  
  <!-- JavaScript -->
  <script src="lib/angular.js"></script>
  <script src="lib/angular-ui-router.js"></script>
  <script src="lib/angular-resource.js"></script>
  <script src="lib/moment.min.js"></script>
  <script src="lib/moment.ja.js"></script>
  <script src="js/main.js"></script>

  <!-- Templates -->
  <script type="text/ng-template" id="tpl/airing.html">
    <table class="pure-table pure-table-horizontal" ng-init="sorted='airtime.$date'; reverse=true">
      <thead>
        <tr>
          <th ng-click="sorted='titles.english';reverse=!reverse">Series</th>
          <th ng-click="sorted='episodes.current';reverse=!reverse">Episode</th>
          <th ng-click="sorted='airtime.$date';reverse=!reverse">will air/has aired</th>
          <th ng-click="sorted='staff.translator.name';reverse=!reverse">Translator</th>
          <th ng-click="sorted='staff.editor.name';reverse=!reverse">Editor</th>
          <th ng-click="sorted='staff.timer.name';reverse=!reverse">Timer</th>
          <th ng-click="sorted='staff.typesetter.name';reverse=!reverse">Typesetter</th>
        </tr>
      </thead>
      <tbody>
        <tr data-ng-repeat="show in shows | orderBy:sorted:reverse" ng-click="$state.go('shows.detail', {'showId': '{{show._id.$oid}}'})">
          <td class="title">{{ show.titles.english }}</td>
          <td>{{ show.episodes.current+1 }} (of {{ show.episodes.total }})</td>
          <td data-eta="show.airtime.$date"></td>
          <td data-member-highlight="show.staff.translator"></td>
          <td data-member-highlight="show.staff.editor"></td>
          <td data-member-highlight="show.staff.timer"></td>
          <td data-member-highlight="show.staff.typesetter"></td>
        </tr>
      </tbody>
    </table>
    <div class="stalk" id="tablefooter">Times are local.</div>
  </script>
  <script type="text/ng-template" id="tpl/completed.html">
    <table class="pure-table pure-table-horizontal">
      <thead><tr><th>Series</th><th>Last Aired</th><th>Episodes</th><th>Translator</th><th>Editor</th><th>Timer</th><th>Typesetter</th></tr></thead>
      <tbody>
        <tr ng-repeat="show in shows" ng-click="$state.go('shows.detail', {'showId': show._id.$oid})">
          <td class="title">{{ show.titles.english }}</td>
          <td>{{ localise_date(show.airtime.$date) }}</td>
          <td>{{ show.episodes.total }}</td>
          <td>{{ show.staff.translator.name }}</td>
          <td>{{ show.staff.editor.name }}</td>
          <td>{{ show.staff.timer.name }}</td>
          <td>{{ show.staff.typesetter.name }}</td>
        </tr>
      </tbody>
    </table>
    <div class="stalk" id="tablefooter">Times are local.</div>
  </script>
  <script type="text/ng-template" id="tpl/shows.detail.html">
    <div class="pure-g">
      <div class="show-header pure-g">
        <button type="button" class="close back-button">×</button>
        <div class="pure-u-1-2">
          <h3>{{ show.titles.english }}</h3>
        </div>
      </div>
      <div class="show-body pure-g-r">
        <div class="pure-u-1-2">
          <dl class="dl-horizontal">
            <dt>Japanese Title</dt><dd>{{ show.titles.japanese }}</dd>
            <dt>Short Title/Abbr.</dt><dd>{{ show.titles.short }}</dd>
            <dt>Airtime (JST)</dt><dd>{{ nipify_date(show.airtime.$date) }}</dd>
            <dt>Airtime (Local)</dt><dd>{{ localise_date(show.airtime.$date) }}</dd>
            <dt>Episode Count</dt><dd>{{ show.episodes.current }} / {{ show.episodes.total }}</dd>
            <dt>Channel</dt><dd>{{ show.channel }}</dd>
          </dl>
        </div>
        <div class="pure-u-1-3">
          <dl class="dl-horizontal">
            <dt>Translator</dt><dd data-member-highlight="show.staff.translator"></dd>
            <dt>Editor</dt><dd data-member-highlight="show.staff.editor"></dd></dd>
            <dt>Timer</dt><dd data-member-highlight="show.staff.timer"></dd>
            <dt>Typesetter</dt><dd data-member-highlight="show.staff.typesetter"></dd>
          </dl>
        </div>
      </div>
    </div>
    <div class="stalk"><a href="{{ show.link }}">Releases here.</a></div>
  </script>
  <script type="text/ng-template" id="tpl/staff.member.html">
    <h5><%= name %></h5>
  </script>

</body>
</html>
